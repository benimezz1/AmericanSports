<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PlayNorth • Home</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="assets/css/nav.css" />
  <link rel="stylesheet" href="assets/css/theme.css" />
  <style>
    .home-stack{display:flex;flex-direction:column;gap:22px}
    .radar-grid{grid-template-columns:repeat(2,1fr)}
    .compact-list{display:flex;flex-direction:column;gap:10px}
    .compact-item{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:var(--surface-2)}
    .compact-item p{margin:0;color:var(--muted);font-size:12px}
    .bullets{margin:0;padding-left:18px;display:flex;flex-direction:column;gap:8px;color:var(--muted);font-size:13px}
    .source-only{display:none}
    @media (max-width: 640px){.radar-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="container navbar">
      <button id="menuBtn" class="hamburger" aria-label="Abrir menu" aria-controls="sidebar" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <a class="brand" href="index.html" aria-label="Ir para Home">
        <div class="brand-badge"></div>
        <span>PlayNorth (protótipo)</span>
      </a>
      <nav>
        <a class="navlink" href="index.html">Home</a>
<a class="navlink" href="nfl.html">NFL</a>
<a class="navlink" href="nba.html">NBA</a>
<a class="navlink" href="nhl.html">NHL</a>
<a class="navlink" href="mlb.html">MLB</a>
<a class="navlink" href="mls.html">MLS</a>
<a class="navlink" href="games.html">Jogos da Semana</a>
<a class="navlink" href="standings.html">Ranking / Standings</a>
      </nav>
      <button id="themeBtn" class="theme-toggle">☀</button>
    </div>
  </header>

  <div id="sidebarOverlay" hidden></div>
  <aside id="sidebar" aria-label="Menu lateral" hidden>
    <a href="index.html">Home</a>
    <a href="nfl.html">NFL</a>
    <a href="nba.html">NBA</a>
    <a href="nhl.html">NHL</a>
    <a href="mlb.html">MLB</a>
    <a href="mls.html">MLS</a>
    <a href="games.html">Jogos da Semana</a>
    <a href="standings.html">Ranking / Standings</a>
  </aside>

  <main class="container home-stack">
    <div class="section">
      <div class="section-head">
        <div>
          <h2>Hero Principal</h2>
          <p>Principal manchete do dia</p>
        </div>
      </div>
      <div id="heroMain"></div>
    </div>

    <div class="section">
      <div class="section-head">
        <div>
          <h2>Radar do Dia</h2>
          <p>Em Alta • Em Queda • Pode Explodir • Fique de Olho</p>
        </div>
      </div>
      <div id="heroSide" class="grid radar-grid"></div>
    </div>

    <div class="section">
      <div class="section-head">
        <div>
          <h2>O que muda agora?</h2>
          <p>Leitura rápida do cenário</p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <ul id="macroBullets" class="bullets">
            <li>(protótipo)</li>
            <li>(protótipo)</li>
            <li>(protótipo)</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-head">
        <div>
          <h2>Hoje no calendário</h2>
          <p>1–3 eventos do dia em layout compacto</p>
        </div>
        <a href="games.html">Ver todos</a>
      </div>
      <div id="calendarCompact" class="compact-list"></div>
    </div>

    <div class="section">
      <div class="section-head">
        <div>
          <h2>Panorama das ligas</h2>
          <p>Snapshot compacto sem repetir listões dos hubs</p>
        </div>
      </div>
      <div id="leaguePanorama" class="compact-list"></div>
    </div>

    <div class="section">
      <div class="section-head">
        <div>
          <h2>Últimas atualizações</h2>
          <p>Feed compacto</p>
        </div>
      </div>
      <div id="latestUpdates" class="compact-list"></div>
    </div>

    <div id="appError" class="notice" style="display:none"></div>

    <div class="source-only" aria-hidden="true">
      <div id="league_NBA" class="grid compact"></div>
      <div id="league_NFL" class="grid compact"></div>
      <div id="league_NHL" class="grid compact"></div>
      <div id="league_MLB" class="grid compact"></div>
      <div id="league_MLS" class="grid compact"></div>
      <div id="gamesGrid" class="grid"></div>
      <div id="standingsGrid" class="grid"></div>
    </div>

    <div class="footer">
      <div>Protótipo estático no GitHub Pages • Dados fake em <code>data/*.json</code></div>
      <div>Próximo passo: conectar sua triagem para gerar os JSON automaticamente</div>
    </div>
  </main>

  <script src="js/main.js"></script>
  <script src="assets/js/nav.js"></script>
  <script src="assets/js/theme.js"></script>
  <script>
    function toCompactItem(title, subtitle, href){
      const linkStart = href ? `<a href="${href}" style="display:block">` : "";
      const linkEnd = href ? "</a>" : "";
      return `${linkStart}<div class="compact-item"><div><h3 class="title small">${title}</h3><p>${subtitle}</p></div><span class="chip">Abrir</span></div>${linkEnd}`;
    }

    function buildMacroHome(){
      const radarCards = [...document.querySelectorAll("#heroSide .card")].slice(0, 4);
      if(!radarCards.length) return false;

      ["Em Alta", "Em Queda", "Pode Explodir", "Fique de Olho"].forEach((label, index) => {
        const chips = radarCards[index]?.querySelectorAll(".chip");
        if(chips && chips[1]) chips[1].textContent = label;
      });

      const newsCards = [...document.querySelectorAll("#heroMain .card, #heroSide .card, #league_NBA .card, #league_NFL .card, #league_NHL .card, #league_MLB .card, #league_MLS .card")];
      const uniqueNews = newsCards.filter((card, idx, arr) => {
        const href = card.getAttribute("href");
        return href && arr.findIndex(c => c.getAttribute("href") === href) === idx;
      });

      const bullets = uniqueNews.slice(0,3).map(card => `<li>${card.querySelector('.title')?.textContent?.trim() || '(protótipo)'}</li>`);
      document.getElementById("macroBullets").innerHTML = bullets.length ? bullets.join("") : "<li>(protótipo)</li>";

      const gameCards = [...document.querySelectorAll("#gamesGrid .card")].slice(0,3);
      document.getElementById("calendarCompact").innerHTML = gameCards.length
        ? gameCards.map(card => toCompactItem(
            card.querySelector(".title")?.textContent?.trim() || "(protótipo)",
            card.querySelector(".desc")?.textContent?.trim() || "(protótipo)",
            "games.html"
          )).join("")
        : `<div class="notice">(protótipo)</div>`;

      const leagueOrder = ["NFL", "NBA", "MLB", "NHL", "MLS"];
      document.getElementById("leaguePanorama").innerHTML = leagueOrder.map(league => {
        const card = document.querySelector(`#league_${league} .card`);
        const title = card?.querySelector(".title")?.textContent?.trim() || "(protótipo)";
        return toCompactItem(`${league}`, title, `${league.toLowerCase()}.html`);
      }).join("");

      document.getElementById("latestUpdates").innerHTML = uniqueNews.slice(0,5).map(card => {
        const title = card.querySelector(".title")?.textContent?.trim() || "(protótipo)";
        const meta = card.querySelector(".meta span")?.textContent?.trim() || "(protótipo)";
        return toCompactItem(title, meta, card.getAttribute("href"));
      }).join("");

      return true;
    }

    let tries = 0;
    const timer = setInterval(() => {
      tries += 1;
      if(buildMacroHome() || tries > 40) clearInterval(timer);
    }, 150);
  </script>
</body>
</html>
